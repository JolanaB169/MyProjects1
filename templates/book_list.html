{% extends 'base.html' %}
{% block content %}
    <h1>List of books</h1>

    <form method="get">
    <label for="genre">Filter by genre:</label>
    <select name="genre" id="genre" onchange="this.form.submit()">
        <option value="">-- All genres --</option>
        {% for genre in genres %}
            <option value="{{ genre.id }}" {% if genre.id == selected_genre %}selected{% endif %}>{{ genre.name }}</option>
        {% endfor %}
    </select>
</form>

<ul>
    {% for book in books %}
        <li><a href="{% url 'book_detail' book.pk %}">{{ book.title }}</a></li>
    {% empty %}
        <li>No books to display.</li>
    {% endfor %}
</ul>
{% endblock %}